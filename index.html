<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Namaz Vakti Yardımcısı</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            touch-action: manipulation;
        }
        .action-button {
            transition: transform 0.1s ease-in-out, box-shadow 0.1s ease-in-out;
        }
        .action-button:active {
            transform: scale(0.98);
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800 flex items-center justify-center min-h-screen">

    <div id="app-container" class="w-full max-w-md mx-auto p-4">

        <!-- Main Menu Screen -->
        <div id="main-menu" class="space-y-4">
            <h1 class="text-4xl font-bold text-center text-teal-700 mb-6">Namaz Vakitleri</h1>
            <button data-prayer="sabah" class="action-button w-full bg-teal-500 text-white py-6 px-4 rounded-xl shadow-lg text-2xl font-bold">Sabah</button>
            <button data-prayer="ogle" class="action-button w-full bg-teal-500 text-white py-6 px-4 rounded-xl shadow-lg text-2xl font-bold">Öğle</button>
            <button data-prayer="ikindi" class="action-button w-full bg-teal-500 text-white py-6 px-4 rounded-xl shadow-lg text-2xl font-bold">İkindi</button>
            <button data-prayer="aksam" class="action-button w-full bg-teal-500 text-white py-6 px-4 rounded-xl shadow-lg text-2xl font-bold">Akşam</button>
            <button data-prayer="yatsi" class="action-button w-full bg-teal-500 text-white py-6 px-4 rounded-xl shadow-lg text-2xl font-bold">Yatsı</button>
        </div>

        <!-- Prayer Screen (Initially Hidden) -->
        <div id="prayer-screen" class="hidden">
            <h2 id="prayer-title" class="text-3xl font-bold text-center text-teal-700 mb-2"></h2>
            <p id="prayer-section" class="text-xl text-center text-gray-500 mb-4"></p>
            <div class="bg-white p-8 rounded-2xl shadow-xl text-center min-h-[200px] flex items-center justify-center">
                <p id="step-title" class="text-4xl font-semibold"></p>
            </div>
            <div class="mt-6 grid grid-cols-2 gap-4">
                 <button id="play-pause-btn" class="action-button w-full bg-green-600 text-white py-4 rounded-xl shadow-md text-xl font-bold">Başlat</button>
                 <button id="stop-btn" class="action-button w-full bg-red-500 text-white py-4 rounded-xl shadow-md text-xl font-bold">Durdur</button>
            </div>
            <p id="info-text" class="text-center text-sm text-gray-500 mt-4 h-4"></p>
        </div>
    </div>

    <audio id="audio-player"></audio>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- 1. AUDIO DATEIEN: IHRE MP3-LISTE ---
        const audioFiles = {
            ezan: "audio/ezan.mp3", kamet: "audio/kamet.mp3", fatiha: "audio/fatiha.mp3",
            tekbir: "audio/tekbir.mp3", tekbir_subhaneke: "audio/tekbir_subhaneke.mp3",
            ruku: "audio/ruku.mp3", secde: "audio/secde.mp3", tahiyyat: "audio/tahiyyat.mp3",
            salli_barik: "audio/salli_barik.mp3", rabbena: "audio/rabbena.mp3", selam: "audio/selam.mp3",
            kunut: "audio/kunut.mp3", kalkis: "audio/kalkis.mp3", kalkis_rekat: "audio/kalkis_rekat.mp3",
            bitis: "audio/bitis.mp3",
            zammisure_felak: "audio/zammisure_felak.mp3", zammisure_fil: "audio/zammisure_fil.mp3",
            zammisure_ihlas: "audio/zammisure_ihlas.mp3", zammisure_kevser: "audio/zammisure_kevser.mp3",
            zammisure_kureys: "audio/zammisure_kureys.mp3", zammisure_nas: "audio/zammisure_nas.mp3",
            sabah_sunnet_niyet: "audio/sabah_sunnet_niyet.mp3", sabah_farz_gecis: "audio/sabah_farz_gecis.mp3",
            sabah_farz_niyet: "audio/sabah_farz_niyet.mp3", sabah_bitis: "audio/sabah_bitis.mp3",
            oegle_ilksunnet_niyet: "audio/oegle_ilksunnet_niyet.mp3", oegle_farz_gecis: "audio/oegle_farz_gecis.mp3",
            oegle_farz_niyet: "audio/oegle_farz_niyet.mp3", oegle_sonsunnet_gecis: "audio/oegle_sonsunnet_gecis.mp3",
            oegle_sonsunnet_niyet: "audio/oegle_sonsunnet_niyet.mp3", oegle_bitis: "audio/oegle_bitis.mp3",
            ikindi_sunnet_niyet: "audio/ikindi_sunnet_niyet.mp3", ikindi_farz_gecis: "audio/ikindi_farz_gecis.mp3",
            ikindi_farz_niyet: "audio/ikindi_farz_niyet.mp3", ikindi_bitis: "audio/ikindi_bitis.mp3",
            aksam_farz_niyet: "audio/aksam_farz_niyet.mp3", aksam_sunnet_gecis: "audio/akşam_sunnet_gecis.mp3",
            aksam_sunnet_niyet: "audio/aksam_sünet_niyet.mp3", aksam_bitis: "audio/aksam_bitis.mp3",
            yatsi_ilksunnet_niyet: "audio/yatsi_ilksunnet_niyet.mp3", yatsi_farz_gecis: "audio/yatsi_farz_gecis.mp3",
            yatsi_farz_niyet: "audio/yatsi_farz_niyet.mp3", yatsi_sonsunnet_gecis: "audio/yatsi_sonsunnet_gecis.mp3",
            yatsi_sonsunnet_niyet: "audio/yatsi_sonsunnet_niyet.mp3", yatsi_vitir_niyet: "audio/yatsi_vitir_niyet.mp3",
            yatsi_bitis: "audio/yatsi_bitis.mp3",
        };

        const zammisureKeys = Object.keys(audioFiles).filter(k => k.startsWith('zammisure_'));

        // --- 2. GEBETSABLAUF (DETAILLIERT) ---
        const rekat_1 = [ { title: "Tekbir & Sübhaneke", audioKey: "tekbir_subhaneke" }, { title: "Fatiha", audioKey: "fatiha" }, { title: "Zammı Sure", audioKey: "ZAMMISURE_RANDOM" }, { title: "Rüku", audioKey: "ruku" }, { title: "Secde", audioKey: "secde" }, { title: "Kalkış", audioKey: "kalkis_rekat" }, ];
        const rekat_2_otur = [ { title: "Fatiha", audioKey: "fatiha" }, { title: "Zammı Sure", audioKey: "ZAMMISURE_RANDOM" }, { title: "Rüku", audioKey: "ruku" }, { title: "Secde", audioKey: "secde" }, { title: "Tahiyyat", audioKey: "tahiyyat" }, ];
        const rekat_3_kalk = [ { title: "Kalkış", audioKey: "kalkis" }, { title: "Fatiha", audioKey: "fatiha" }, { title: "Rüku", audioKey: "ruku" }, { title: "Secde", audioKey: "secde" }, { title: "Kalkış", audioKey: "kalkis_rekat" }, ];
        const rekat_son_selam = [ { title: "Fatiha", audioKey: "fatiha" }, { title: "Rüku", audioKey: "ruku" }, { title: "Secde", audioKey: "secde" }, { title: "Tahiyyat", audioKey: "tahiyyat" }, { title: "Salli-Barik", audioKey: "salli_barik" }, { title: "Rabbena", audioKey: "rabbena" }, { title: "Selam", audioKey: "selam" }, ];
        const vitir_rekat_3 = [ { title: "Kalkış", audioKey: "kalkis" }, { title: "Fatiha", audioKey: "fatiha" }, { title: "Zammı Sure", audioKey: "ZAMMISURE_RANDOM" }, { title: "Kunut Duaları", audioKey: "kunut"}, { title: "Rüku", audioKey: "ruku" }, { title: "Secde", audioKey: "secde" }, { title: "Tahiyyat", audioKey: "tahiyyat" }, { title: "Salli-Barik", audioKey: "salli_barik" }, { title: "Rabbena", audioKey: "rabbena" }, { title: "Selam", audioKey: "selam" }, ];

        const prayerData = {
            sabah: { name: "Sabah Namazı", steps: [ { section: "Başlangıç", title: "Ezan", audioKey: "ezan" }, { section: "Sünnet", title: "Niyet", audioKey: "sabah_sunnet_niyet" }, ...rekat_1, ...rekat_2_otur, { section: "Sünnet", title: "Salli-Barik", audioKey: "salli_barik" }, { section: "Sünnet", title: "Rabbena", audioKey: "rabbena" }, { section: "Sünnet", title: "Selam", audioKey: "selam" }, { section: "Farz", title: "Geçiş & Kamet", audioKey: "sabah_farz_gecis" }, { section: "Farz", title: "Niyet", audioKey: "sabah_farz_niyet" }, ...rekat_1, ...rekat_2_otur, { section: "Farz", title: "Salli-Barik", audioKey: "salli_barik" }, { section: "Farz", title: "Rabbena", audioKey: "rabbena" }, { section: "Farz", title: "Selam", audioKey: "selam" }, { section: "Bitiş", title: "Tesbihat", audioKey: "sabah_bitis" }, ] },
            ogle: { name: "Öğle Namazı", steps: [ { section: "Başlangıç", title: "Ezan", audioKey: "ezan" }, { section: "İlk Sünnet", title: "Niyet", audioKey: "oegle_ilksunnet_niyet" }, ...rekat_1, ...rekat_2_otur, ...rekat_3_kalk, ...rekat_son_selam, { section: "Farz", title: "Geçiş & Kamet", audioKey: "oegle_farz_gecis" }, { section: "Farz", title: "Niyet", audioKey: "oegle_farz_niyet" }, ...rekat_1, ...rekat_2_otur, ...rekat_3_kalk, ...rekat_son_selam, { section: "Son Sünnet", title: "Geçiş", audioKey: "oegle_sonsunnet_gecis" }, { section: "Son Sünnet", title: "Niyet", audioKey: "oegle_sonsunnet_niyet" }, ...rekat_1, ...rekat_2_otur, { section: "Son Sünnet", title: "Salli-Barik", audioKey: "salli_barik" }, { section: "Son Sünnet", title: "Rabbena", audioKey: "rabbena" }, { section: "Son Sünnet", title: "Selam", audioKey: "selam" }, { section: "Bitiş", title: "Tesbihat", audioKey: "oegle_bitis" }, ] },
            ikindi: { name: "İkindi Namazı", steps: [ { section: "Başlangıç", title: "Ezan", audioKey: "ezan" }, { section: "Sünnet", title: "Niyet", audioKey: "ikindi_sunnet_niyet" }, ...rekat_1, ...rekat_2_otur, { section: "Sünnet", title: "Salli-Barik", audioKey: "salli_barik" }, ...rekat_3_kalk, ...rekat_son_selam, { section: "Farz", title: "Geçiş & Kamet", audioKey: "ikindi_farz_gecis" }, { section: "Farz", title: "Niyet", audioKey: "ikindi_farz_niyet" }, ...rekat_1, ...rekat_2_otur, ...rekat_3_kalk, ...rekat_son_selam, { section: "Bitiş", title: "Tesbihat", audioKey: "ikindi_bitis" }, ] },
            aksam: { name: "Akşam Namazı", steps: [ { section: "Başlangıç", title: "Ezan", audioKey: "ezan" }, { section: "Farz", title: "Kamet & Niyet", audioKey: "aksam_farz_niyet" }, ...rekat_1, ...rekat_2_otur, ...rekat_son_selam, { section: "Sünnet", title: "Geçiş", audioKey: "aksam_sunnet_gecis" }, { section: "Sünnet", title: "Niyet", audioKey: "aksam_sunnet_niyet" }, ...rekat_1, ...rekat_2_otur, { section: "Sünnet", title: "Salli-Barik", audioKey: "salli_barik" }, { section: "Sünnet", title: "Rabbena", audioKey: "rabbena" }, { section: "Sünnet", title: "Selam", audioKey: "selam" }, { section: "Bitiş", title: "Tesbihat", audioKey: "aksam_bitis" }, ] },
            yatsi: { name: "Yatsı Namazı", steps: [ { section: "Başlangıç", title: "Ezan", audioKey: "ezan" }, { section: "İlk Sünnet", title: "Niyet", audioKey: "yatsi_ilksunnet_niyet" }, ...rekat_1, ...rekat_2_otur, { section: "İlk Sünnet", title: "Salli-Barik", audioKey: "salli_barik" }, ...rekat_3_kalk, ...rekat_son_selam, { section: "Farz", title: "Geçiş & Kamet", audioKey: "yatsi_farz_gecis" }, { section: "Farz", title: "Niyet", audioKey: "yatsi_farz_niyet" }, ...rekat_1, ...rekat_2_otur, ...rekat_3_kalk, ...rekat_son_selam, { section: "Son Sünnet", title: "Geçiş", audioKey: "yatsi_sonsunnet_gecis" }, { section: "Son Sünnet", title: "Niyet", audioKey: "yatsi_sonsunnet_niyet" }, ...rekat_1, ...rekat_2_otur, { section: "Son Sünnet", title: "Salli-Barik", audioKey: "salli_barik" }, { section: "Son Sünnet", title: "Rabbena", audioKey: "rabbena" }, { section: "Son Sünnet", title: "Selam", audioKey: "selam" }, { section: "Vitir", title: "Niyet", audioKey: "yatsi_vitir_niyet" }, ...rekat_1, ...rekat_2_otur, ...vitir_rekat_3, { section: "Bitiş", title: "Tesbihat", audioKey: "yatsi_bitis" }, ] }
        };

        // --- 3. APP LOGIK ---
        let currentPrayer = null;
        let currentStepIndex = 0;
        let playerState = 'idle'; // 'idle', 'playing', 'paused', 'blocked'

        const mainMenu = document.getElementById('main-menu');
        const prayerScreen = document.getElementById('prayer-screen');
        const prayerTitle = document.getElementById('prayer-title');
        const prayerSection = document.getElementById('prayer-section');
        const stepTitle = document.getElementById('step-title');
        const audioPlayer = document.getElementById('audio-player');
        const playPauseBtn = document.getElementById('play-pause-btn');
        const stopBtn = document.getElementById('stop-btn');
        const infoText = document.getElementById('info-text');

        function getAudioPath(step) {
            let audioKey = step.audioKey;
            if (audioKey === "ZAMMISURE_RANDOM") {
                const randomIndex = Math.floor(Math.random() * zammisureKeys.length);
                audioKey = zammisureKeys[randomIndex];
            }
            return audioFiles[audioKey];
        }

        function playCurrentStep() {
            const prayer = prayerData[currentPrayer];
            if (currentStepIndex >= prayer.steps.length) {
                showMainMenu();
                return;
            }
            const step = prayer.steps[currentStepIndex];
            const audioPath = getAudioPath(step);
            
            prayerSection.textContent = step.section;
            stepTitle.textContent = step.title;
            
            if (!audioPath) {
                goToNextStep();
                return;
            }

            audioPlayer.src = audioPath;
            const playPromise = audioPlayer.play();

            if (playPromise !== undefined) {
                playPromise.then(() => {
                    playerState = 'playing';
                    playPauseBtn.textContent = "Duraklat";
                    infoText.textContent = "";
                }).catch(error => {
                    console.warn("Autoplay wurde vom Browser blockiert.", error.message);
                    playerState = 'blocked';
                    playPauseBtn.textContent = "Devam Et";
                    infoText.textContent = "Zum Fortfahren 'Devam Et' klicken.";
                });
            }
        }
        
        function goToNextStep() {
            currentStepIndex++;
            playCurrentStep();
        }

        function startPrayer(prayerKey) {
            currentPrayer = prayerKey;
            currentStepIndex = 0;
            mainMenu.classList.add('hidden');
            prayerScreen.classList.remove('hidden');
            
            const prayer = prayerData[currentPrayer];
            prayerTitle.textContent = prayer.name;
            prayerSection.textContent = prayer.steps[0].section;
            stepTitle.textContent = prayer.steps[0].title;
            playPauseBtn.textContent = "Başlat";
            playerState = 'idle';
            infoText.textContent = "";
        }

        function showMainMenu() {
            prayerScreen.classList.add('hidden');
            mainMenu.classList.remove('hidden');
            audioPlayer.pause();
            audioPlayer.src = "";
            currentPrayer = null;
            playerState = 'idle';
            infoText.textContent = "";
        }

        // --- EVENT LISTENERS ---
        document.querySelectorAll('[data-prayer]').forEach(button => {
            button.addEventListener('click', () => startPrayer(button.dataset.prayer));
        });

        playPauseBtn.addEventListener('click', () => {
            if (playerState === 'playing') {
                audioPlayer.pause();
                playerState = 'paused';
                playPauseBtn.textContent = "Devam Et";
                infoText.textContent = "Pausiert.";
            } else {
                playCurrentStep();
            }
        });

        stopBtn.addEventListener('click', showMainMenu);

        audioPlayer.addEventListener('ended', () => {
            goToNextStep();
        });
    });
    </script>
</body>
</html>
